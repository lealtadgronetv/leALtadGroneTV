<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Partidos de hoy</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <!-- NO BLOQUEAR ADS -->
    <meta name="referrer" content="no-referrer-when-downgrade">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: white;
            margin: 0;
            padding: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: #232323;
            padding: 15px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        h1 {
            margin: 0;
            color: #f1c40f;
        }
        
        .ad-container {
            margin: 20px auto;
            text-align: center;
            overflow: hidden;
            min-height: 100px;
            background-color: rgba(255,255,255,0.05);
            border: 1px dashed #444;
            padding: 5px;
            position: relative;
            z-index: 10;
        }
        
        .ad-banner {
            width: 100%;
            margin: 0 auto;
            display: block;
            text-align: center;
        }
        
        .partidos-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 20px 0;
        }
        
        .partido-wrapper {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .partido {
            background-color: #232323;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: background-color 0.3s;
            position: relative;
        }
        
        .partido:hover {
            background-color: #333;
        }
        
        .partido h3 {
            margin-top: 0;
            color: #f1c40f;
        }
        
        .partido .tiempo {
            color: #999;
            font-size: 14px;
        }
        
        .partido video {
            width: 100%;
            display: none;
            margin-top: 15px;
            border-radius: 5px;
        }
        
        .partido-ad {
            background-color: rgba(255,255,255,0.05);
            border: 1px dashed #444;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            min-height: 90px;
        }
        
        footer {
            background-color: #232323;
            text-align: center;
            padding: 15px;
            margin-top: 30px;
            color: #888;
        }
        
        .partido.active {
            border: 2px solid #f1c40f;
        }
        
        .ad-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            background: rgba(0,0,0,0.9);
            padding: 20px;
            border-radius: 10px;
            max-width: 500px;
            width: 80%;
            display: none;
        }
        
        .popup-close {
            position: absolute;
            top: 10px;
            right: 10px;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        iframe {
            border: 0;
        }
        
        /* Espacios para anuncios directos */
        .ad-direct {
            width: 100%;
            margin: 20px auto;
            min-height: 90px;
        }
        
        /* Botón de anclaje para ver más */
        .ver-mas-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #f1c40f;
            color: #232323;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            z-index: 100;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: all 0.3s;
            font-size: 16px;
        }
        
        .ver-mas-btn:hover {
            background-color: #ffdd44;
            transform: scale(1.05);
        }
        
        /* Indicador de contenido adicional */
        .contenido-indicador {
            text-align: center;
            padding: 10px;
            color: #f1c40f;
            font-weight: bold;
            margin: 20px 0;
            animation: pulsar 2s infinite;
        }
        
        @keyframes pulsar {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
        
        /* Estilos para botón mostrar más partidos */
        .mostrar-mas {
            background-color: #f1c40f;
            color: #232323;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            margin: 20px auto;
            display: block;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mostrar-mas:hover {
            background-color: #ffdd44;
            transform: scale(1.05);
        }
        
        /* Anuncios flotantes */
        .ad-flotante {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 300px;
            z-index: 90;
            background: rgba(35, 35, 35, 0.9);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            padding: 10px;
            border: 1px solid #444;
        }
        
        .ad-flotante-close {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #f1c40f;
            color: #232323;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            cursor: pointer;
            font-weight: bold;
        }
        
        /* Ocultar partidos adicionales inicialmente */
        .oculto {
            display: none;
        }
        
        /* Panel para añadir partidos */
        #panel-config {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: rgba(35, 35, 35, 0.9);
            padding: 15px;
            border-radius: 8px;
            z-index: 500;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
            transform: translateX(100%);
            width: 300px;
        }
        
        #panel-config.visible {
            transform: translateX(0);
        }
        
        .config-toggle {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: #f1c40f;
            color: #232323;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-size: 20px;
            cursor: pointer;
            z-index: 501;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .form-group {
            margin-bottom: 10px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #f1c40f;
        }
        
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #444;
            background-color: #333;
            color: white;
        }
        
        .submit-btn {
            background-color: #f1c40f;
            color: #232323;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Partidos en Vivo</h1>
        </header>
        
        <!-- Anuncio Superior (banner) -->
        <div class="ad-container" id="ad-top">
            <!-- ANUNCIO BANNER SUPERIOR -->
            <div class="ad-banner">
                <script type="text/javascript">
                    atOptions = {
                        'key': 'b330ccd204185aee9ef640adccf896d2',
                        'format': 'iframe',
                        'height': 90,
                        'width': 728,
                        'params': {}
                    };
                    document.write('<scr' + 'ipt type="text/javascript" src="//www.highperformanceformat.com/b330ccd204185aee9ef640adccf896d2/invoke.js"></scr' + 'ipt>');
                </script>
            </div>
        </div>
        
        <!-- Anuncio Directo -->
        <div class="ad-direct">
            <script type='text/javascript' src='//pl26063313.effectiveratecpm.com/93/61/3d/93613d042ce505fe468e829efbb21520.js'></script>
        </div>
        
        <!-- Partidos Container -->
        <div class="partidos-container" id="partidos-container">
            <!-- Aquí se cargarán los partidos dinámicamente -->
        </div>
        
        <!-- Botón mostrar más partidos -->
        <button class="mostrar-mas" id="btn-mostrar-mas">Mostrar más partidos</button>
        
        <!-- Indicador de contenido adicional -->
        <div class="contenido-indicador">
            Más partidos y contenido disponible ↓
        </div>
        
        <!-- Anuncio Container Central -->
        <div class="ad-container">
            <script async="async" data-cfasync="false" src="//pl26063295.effectiveratecpm.com/2537ae2ea8b16bc9e554273a94dfd098/invoke.js"></script>
            <div id="container-2537ae2ea8b16bc9e554273a94dfd098"></div>
        </div>
        
        <!-- Anuncio Directo (adicional) -->
        <div class="ad-container">
            <iframe src="https://www.effectiveratecpm.com/wy4ysndt?key=12c98d265ef2e657283053a557f43edd" width="100%" height="250" frameborder="0" scrolling="no"></iframe>
        </div>
        
        <!-- Anuncio Inferior -->
        <div class="ad-container">
            <script type='text/javascript' src='//pl26063307.effectiveratecpm.com/19/09/91/1909913ee893cee324321a2b56c090fa.js'></script>
        </div>
        
        <footer>
            &copy; 2025 Partidos en Vivo - Todos los derechos reservados
        </footer>
    </div>
    
    <!-- Botón de anclaje para ver más -->
    <div class="ver-mas-btn" onclick="verMasContenido()">
        Ver más partidos y anuncios ↓
    </div>
    
    <!-- Anuncio flotante -->
    <div class="ad-flotante" id="ad-flotante">
        <div class="ad-flotante-close" onclick="document.getElementById('ad-flotante').style.display='none'">×</div>
        <script type="text/javascript">
            atOptions = {
                'key': 'b330ccd204185aee9ef640adccf896d2',
                'format': 'iframe',
                'height': 250,
                'width': 300,
                'params': {}
            };
            document.write('<scr' + 'ipt type="text/javascript" src="//www.highperformanceformat.com/b330ccd204185aee9ef640adccf896d2/invoke.js"></scr' + 'ipt>');
        </script>
    </div>
    
    <!-- Panel para configuración y añadir partidos -->
    <div class="config-toggle" onclick="toggleConfigPanel()">⚙️</div>
    <div id="panel-config">
        <h3>Añadir Partido</h3>
        <div class="form-group">
            <label for="titulo">Título del partido:</label>
            <input type="text" id="titulo" placeholder="Ej: Liga Campeones: Barcelona vs Real Madrid">
        </div>
        <div class="form-group">
            <label for="tiempo">Hora del partido:</label>
            <input type="text" id="tiempo" placeholder="Ej: 19:30">
        </div>
        <div class="form-group">
            <label for="url">URL del stream (m3u8):</label>
            <textarea id="url" rows="3" placeholder="https://dg9wzq.fubohd.com/tudnusa/mono.m3u8?token=..."></textarea>
        </div>
        <button class="submit-btn" onclick="agregarPartidoDesdePanel()">Añadir Partido</button>
    </div>
    
    <script>
        // Variable para mantener la instancia actual de HLS
        let currentHls = null;
        let lastActivePartido = null;
        let partidosVisibles = 3; // Número inicial de partidos visibles
        
        // Datos de partidos (ejemplo inicial)
        const partidos = [
            {
                titulo: "Liga Campeones CONCACAF: Cavalier vs Inter Miami",
                tiempo: "19:30",
                url: "https://dg9wzq.fubohd.com/tudnusa/mono.m3u8?token=b31b8d998f1dda3059af17f38fdb61612b1be81b-4f-1741961461-1741925461"
            },
            {
                titulo: "Copa Libertadores: Bahia vs Boston River",
                tiempo: "19:30",
                url: "url: "https://dg9wzq.fubohd.com/tudnusa/mono.m3u8?token=b31b8d998f1dda3059af17f38fdb61612b1be81b-4f-1741961461-1741925461"
            },
            {
                titulo: "Copa Libertadores: Bahia vs Boston River",
                tiempo: "19:30",
                url: "https://dg9wzq.fubohd.com/espn/mono.m3u8?token=44165cb4a515a69f2f995ab85d90d09e038c455c-df-1741945731-1741909731"
            },
            {
                titulo: "Copa Libertadores: Peñarol vs The Strongest",
                tiempo: "21:30",
                url: "https://dg9wzq.fubohd.com/espn2/mono.m3u8?token=b31b8d998f1dda3059af17f38fdb61612b1be81b-4f-1741961461-1741925461"
            },
            {
                titulo: "Copa Sudamericana: Belgrano vs Internacional",
                tiempo: "21:30",
                url: "https://dg9wzq.fubohd.com/espn3/mono.m3u8?token=44165cb4a515a69f2f995ab85d90d09e038c455c-df-1741945731-1741909731"
            },
            {
                titulo: "Liga MX: Monterrey vs Juárez",
                tiempo: "21:00",
                url: "https://dg9wzq.fubohd.com/tudn/mono.m3u8?token=b31b8d998f1dda3059af17f38fdb61612b1be81b-4f-1741961461-1741925461"
            },
            {
                titulo: "Amistoso Internacional: México vs Brasil",
                tiempo: "20:30",
                url: "https://yxnobgu.fubohd.com/tudnusa/mono.m3u8?token=4ac7b1c79a36c40a87e0487da41e97a0843174f0-e5-1741939437-1741903437"
            },
            {
                titulo: "Premier League: Arsenal vs Newcastle",
                tiempo: "20:00",
                url: "https://dg9wzq.fubohd.com/espn/mono.m3u8?token=44165cb4a515a69f2f995ab85d90d09e038c455c-df-1741945731-1741909731"
            }
            // Puedes añadir más partidos aquí
        ];
        
        // Aseguramos que los bloqueadores de anuncios no afecten
        document.addEventListener('DOMContentLoaded', function() {
            cargarTodosLosAnuncios();
            detectarBloqueadorAnuncios();
            generarPartidos();
            
            // Configurar botón "Mostrar más"
            document.getElementById('btn-mostrar-mas').addEventListener('click', mostrarMasPartidos);
        });
        
        function generarPartidos() {
            const container = document.getElementById('partidos-container');
            container.innerHTML = '';
            
            partidos.forEach((partido, index) => {
                // Crear wrapper para partido + anuncio
                const wrapper = document.createElement('div');
                wrapper.className = 'partido-wrapper';
                
                // Añadir clase 'oculto' para los partidos que deberían estar inicialmente ocultos
                if (index >= partidosVisibles) {
                    wrapper.classList.add('oculto');
                }
                
                // Crear elemento de partido
                const partidoElement = document.createElement('div');
                partidoElement.className = 'partido';
                partidoElement.innerHTML = `
                    <h3>${partido.titulo}</h3>
                    <div class="tiempo">${partido.tiempo}</div>
                    <video controls></video>
                `;
                
                // Asignar el evento onclick
                partidoElement.onclick = function() {
                    cargarPartido(this, partido.url);
                };
                
                // Crear anuncio para este partido
                const anuncioElement = document.createElement('div');
                anuncioElement.className = 'partido-ad';
                anuncioElement.innerHTML = `
                    <div class="ad-slot-partido" id="ad-partido-${index}">
                        <!-- Anuncio generado dinámicamente -->
                    </div>
                `;
                
                // Agregar el partido y el anuncio al wrapper
                wrapper.appendChild(partidoElement);
                wrapper.appendChild(anuncioElement);
                
                // Agregar el wrapper al contenedor principal
                container.appendChild(wrapper);
                
                // Cargar anuncio en el slot
                cargarAnuncioPartido(index);
            });
            
            // Ocultar el botón "Mostrar más" si no hay más partidos para mostrar
            if (partidos.length <= partidosVisibles) {
                document.getElementById('btn-mostrar-mas').style.display = 'none';
            } else {
                document.getElementById('btn-mostrar-mas').style.display = 'block';
            }
        }
        
        function mostrarMasPartidos() {
            const wrappers = document.querySelectorAll('.partido-wrapper.oculto');
            let contador = 0;
            
            // Mostrar los siguientes 3 partidos (o todos los que queden si son menos de 3)
            wrappers.forEach(wrapper => {
                if (contador < 3) {
                    wrapper.classList.remove('oculto');
                    contador++;
                }
            });
            
            // Actualizar partidos visibles
            partidosVisibles += contador;
            
            // Ocultar el botón si ya no hay más partidos para mostrar
            if (document.querySelectorAll('.partido-wrapper.oculto').length === 0) {
                document.getElementById('btn-mostrar-mas').style.display = 'none';
            }
        }
        
        function cargarAnuncioPartido(index) {
            // Opciones de anuncios rotativas
            const adOptions = [
                // Opción 1: Script de effectiveratecpm
                function(elementId) {
                    const script = document.createElement('script');
                    script.type = 'text/javascript';
                    script.src = '//pl26063307.effectiveratecpm.com/19/09/91/1909913ee893cee324321a2b56c090fa.js';
                    document.getElementById(elementId).appendChild(script);
                },
                // Opción 2: Iframe directo
                function(elementId) {
                    const iframe = document.createElement('iframe');
                    iframe.src = "https://www.effectiveratecpm.com/wy4ysndt?key=12c98d265ef2e657283053a557f43edd";
                    iframe.width = "100%";
                    iframe.height = "90";
                    iframe.frameBorder = "0";
                    iframe.scrolling = "no";
                    document.getElementById(elementId).appendChild(iframe);
                },
                // Opción 3: Anuncio banner highperformanceformat
                function(elementId) {
                    const script = document.createElement('script');
                    script.innerHTML = `
                        atOptions = {
                            'key': 'b330ccd204185aee9ef640adccf896d2',
                            'format': 'iframe',
                            'height': 90,
                            'width': 728,
                            'params': {}
                        };
                    `;
                    document.getElementById(elementId).appendChild(script);
                    
                    const adScript = document.createElement('script');
                    adScript.type = 'text/javascript';
                    adScript.src = '//www.highperformanceformat.com/b330ccd204185aee9ef640adccf896d2/invoke.js';
                    document.getElementById(elementId).appendChild(adScript);
                }
            ];
            
            // Seleccionar una opción de anuncio aleatoria
            const adOption = adOptions[index % adOptions.length];
            setTimeout(() => {
                adOption(`ad-partido-${index}`);
            }, 500);
        }
        
        function cargarTodosLosAnuncios() {
            // Reintentar cargar los anuncios
            setTimeout(function() {
                // Primera carga de anuncios banner
                var script1 = document.createElement('script');
                script1.src = "//www.highperformanceformat.com/b330ccd204185aee9ef640adccf896d2/invoke.js";
                document.getElementById('ad-top').appendChild(script1);
                
                // Cargar anuncio popunder
                var script2 = document.createElement('script');
                script2.src = "//pl26063313.effectiveratecpm.com/93/61/3d/93613d042ce505fe468e829efbb21520.js";
                document.body.appendChild(script2);
            }, 1000);
        }
        
        function detectarBloqueadorAnuncios() {
            // Comprobar si los anuncios están bloqueados
            setTimeout(function() {
                const adContainers = document.querySelectorAll('.ad-container');
                let adsVisible = false;
                
                adContainers.forEach(container => {
                    // Si el contenedor tiene contenido visible, hay anuncios
                    if (container.offsetHeight > 10 && container.innerHTML.trim() !== '') {
                        adsVisible = true;
                    }
                });
                
                if (!adsVisible) {
                    console.log("Posible bloqueador de anuncios detectado");
                    // Intentar cargar alternativas
                    cargarAnunciosAlternativos();
                }
            }, 3000);
        }
        
        function cargarAnunciosAlternativos() {
            // Intenta con otra red de anuncios o método alternativo
            const adContainers = document.querySelectorAll('.ad-container, .partido-ad');
            
            adContainers.forEach(container => {
                // Crear un iframe directo como alternativa
                const iframe = document.createElement('iframe');
                iframe.src = "https://www.effectiveratecpm.com/wy4ysndt?key=12c98d265ef2e657283053a557f43edd";
                iframe.width = "100%";
                iframe.height = "250";
                iframe.frameBorder = "0";
                container.appendChild(iframe);
            });
        }
        
        function cargarPartido(elemento, url) {
            // Restablecer estilo del partido anterior
            if (lastActivePartido) {
                lastActivePartido.classList.remove('active');
                const lastVideo = lastActivePartido.querySelector('video');
                lastVideo.pause();
                lastVideo.style.display = 'none';
                
                // Destruir la instancia anterior de HLS
                if (currentHls) {
                    currentHls.destroy();
                    currentHls = null;
                }
            }
            
            // Activar el partido actual
            elemento.classList.add('active');
            lastActivePartido = elemento;
            
            // Obtener el elemento de video dentro del partido
            const video = elemento.querySelector('video');
            
            // Intentar cargar popunders antes de reproducir el video
            cargarPopunder();
            
            // Activar otros tipos de anuncios
            activarAnunciosPorClick();
            
            // Reproducir el video
            if (Hls.isSupported()) {
                currentHls = new Hls();
                currentHls.loadSource(url);
                currentHls.attachMedia(video);
                currentHls.on(Hls.Events.MANIFEST_PARSED, () => {
                    video.style.display = 'block';
                    video.play().catch(e => {
                        console.log('Error al iniciar reproducción automática:', e);
                    });
                });
                
                currentHls.on(Hls.Events.ERROR, function(event, data) {
                    if (data.fatal) {
                        console.error('Error fatal de HLS:', data);
                        alert('Error al cargar el stream. Por favor, intenta con otro partido.');
                    }
                });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = url;
                video.style.display = 'block';
                video.addEventListener('loadedmetadata', () => {
                    video.play().catch(e => console.log('Error al reproducir en Safari:', e));
                });
            } else {
                alert('Tu navegador no soporta la reproducción de estos videos');
            }
            
            // Desplazarse hasta el partido seleccionado
            elemento.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        function cargarPopunder() {
            // Método 1: Cargar script de popunder
            try {
                var script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = '//pl26063307.effectiveratecpm.com/19/09/91/1909913ee893cee324321a2b56c090fa.js';
                document.body.appendChild(script);
            } catch (e) {
                console.error("Error al cargar popunder:", e);
            }
            
            // Método 2: Cargar iframe popunder
            try {
                var iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                iframe.src = 'https://www.effectiveratecpm.com/wy4ysndt?key=12c98d265ef2e657283053a557f43edd';
                document.body.appendChild(iframe);
            } catch (e) {
                console.log("Error al cargar iframe popunder");
            }
        }
        
        function activarAnunciosPorClick() {
            // Activar todos los anuncios con un solo clic
            document.querySelectorAll('.ad-container, .partido-ad').forEach(container => {
                // Forzar carga de anuncios
                container.style.opacity = '0.99';
                setTimeout(() => {
                    container.style.opacity = '1';
                }, 100);
            });
            
            // Intentar cargar scripts nuevamente
            try {
                // Cargar script container
                var scriptContainer = document.createElement('script');
                scriptContainer.async = true;
                scriptContainer.setAttribute('data-cfasync', 'false');
                scriptContainer.src = '//pl26063295.effectiveratecpm.com/2537ae2ea8b16bc9e554273a94dfd098/invoke.js';
                document.body.appendChild(scriptContainer);
                
                // Cargar otro script de anuncios
                var scriptAds = document.createElement('script');
                scriptAds.type = 'text/javascript';
                scriptAds.src = '//pl26063313.effectiveratecpm.com/93/61/3d/93613d042ce505fe468e829efbb21520.js';
                document.body.appendChild(scriptAds);
            } catch (e) {
                console.error("Error al cargar scripts adicionales:", e);
            }
        }
        
            // Función para desplazarse a los anuncios inferiores
        function verMasContenido() {
            // Mostrar anuncio flotante si está oculto
            document.getElementById('ad-flotante').style.display = 'block';
            
            // Desplazarse a los anuncios inferiores
            const footerElem = document.querySelector('footer');
            if (footerElem) {
                footerElem.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            
            // Activar anuncios adicionales
            activarAnunciosPorClick();
        }
        
        // Función para mostrar/ocultar panel de configuración
        function toggleConfigPanel() {
            const panel = document.getElementById('panel-config');
            panel.classList.toggle('visible');
        }
        
        // Función para añadir nuevo partido desde el panel
        function agregarPartidoDesdePanel() {
            const titulo = document.getElementById('titulo').value.trim();
            const tiempo = document.getElementById('tiempo').value.trim();
            const url = document.getElementById('url').value.trim();
            
            // Validar campos
            if (!titulo || !tiempo || !url) {
                alert('Por favor completa todos los campos');
                return;
            }
            
            // Añadir a la lista de partidos
            partidos.push({
                titulo: titulo,
                tiempo: tiempo,
                url: url
            });
            
            // Regenerar la lista de partidos
            generarPartidos();
            
            // Limpiar formulario
            document.getElementById('titulo').value = '';
            document.getElementById('tiempo').value = '';
            document.getElementById('url').value = '';
            
            // Notificar al usuario
            alert('¡Partido añadido correctamente!');
            
            // Ocultar panel
            document.getElementById('panel-config').classList.remove('visible');
        }
        
        // Función para guardar/cargar la lista de partidos en localStorage
        function guardarPartidos() {
            localStorage.setItem('partidos-en-vivo', JSON.stringify(partidos));
        }
        
        function cargarPartidosGuardados() {
            const partidosGuardados = localStorage.getItem('partidos-en-vivo');
            if (partidosGuardados) {
                // Asignar los partidos guardados a nuestra variable global
                const partidosParsed = JSON.parse(partidosGuardados);
                if (Array.isArray(partidosParsed) && partidosParsed.length > 0) {
                    // Solo cargar si hay partidos válidos
                    partidos.length = 0; // Vaciar array actual
                    partidosParsed.forEach(p => partidos.push(p)); // Añadir partidos guardados
                }
            }
        }
        
        // Función para mostrar el anuncio flotante periódicamente
        function mostrarAnuncioFlotantePeriodico() {
            setInterval(() => {
                // Mostrar anuncio flotante por 30 segundos
                document.getElementById('ad-flotante').style.display = 'block';
                
                // Ocultar después de 30 segundos
                setTimeout(() => {
                    document.getElementById('ad-flotante').style.display = 'none';
                }, 30000);
            }, 150000); // Cada 2.5 minutos
        }
        
        // Inicializar la página
        window.addEventListener('load', function() {
            // Intentar cargar partidos guardados antes de generar
            cargarPartidosGuardados();
            
            // Generar partidos
            generarPartidos();
            
            // Cargar anuncios
            cargarTodosLosAnuncios();
            
            // Cargar anuncios después de 3 segundos para evitar bloqueos
            setTimeout(activarAnunciosPorClick, 3000);
            
            // Iniciar sistema de anuncios flotantes
            mostrarAnuncioFlotantePeriodico();
            
            // Guardar partidos automáticamente cada 5 minutos
            setInterval(guardarPartidos, 300000);
            
            // Observador para detectar cuando los anuncios inferiores están visibles
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Si el anuncio es visible, ocultar el botón "Ver más"
                        document.querySelector('.ver-mas-btn').style.display = 'none';
                    } else {
                        // Si el anuncio no es visible, mostrar el botón
                        document.querySelector('.ver-mas-btn').style.display = 'block';
                    }
                });
            }, { threshold: 0.1 });
            
            // Observar los anuncios inferiores
            const adContainers = document.querySelectorAll('.ad-container');
            const lastAdContainer = adContainers[adContainers.length - 1];
            if (lastAdContainer) {
                observer.observe(lastAdContainer);
            }
        });
    </script>
</body>
</html>
