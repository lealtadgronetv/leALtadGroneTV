<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extractor de enlaces M3U</title>
</head>
<body>
    <h2>Extractor de enlaces M3U</h2>
    <input type="text" id="urlInput" placeholder="Ingrese la URL">
    <button onclick="extractLinks()">Extraer enlaces</button>
    <ul id="resultList"></ul>

    <script>
        async function extractLinks() {
            const url = document.getElementById("urlInput").value;
            if (!url) {
                alert("Ingrese una URL válida");
                return;
            }
            
            try {
                const response = await fetch("https://api.allorigins.win/get?url=" + encodeURIComponent(url));
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                const data = await response.json();
                const text = data.contents;
                
                // Extraer enlaces M3U y sus descripciones
                const regex = /#EXTINF:-1,(.*?)\n(https?:\/\/[^\s]+)/g;
                let match;
                const resultList = document.getElementById("resultList");
                resultList.innerHTML = "";
                
                while ((match = regex.exec(text)) !== null) {
                    const description = match[1];
                    const link = match[2];
                    
                    const listItem = document.createElement("li");
                    listItem.innerHTML = `<strong>${description}</strong>: <a href="${link}" target="_blank">${link}</a>`;
                    resultList.appendChild(listItem);
                }
                
                if (!resultList.hasChildNodes()) {
                    resultList.innerHTML = "<li>No se encontraron enlaces M3U</li>";
                }
            } catch (error) {
                alert("Error al obtener la información. Verifique la URL e intente de nuevo.");
                console.error("Error de solicitud:", error);
            }
        }
    </script>
</body>
</html>
